<!DOCTYPE html>
<html>
  <head>
    <title>ToDo App</title>
    <style>
      :root {
        --priority-color-high: #f44336; /* Red color for high priority */
        --priority-color-medium: #ffc107; /* Orange color for medium priority */
        --priority-color-low: #4caf50; /* Green color for low priority */
      }

      body {
        margin: 0;
        padding: 0;
        background-color: #3b3f3b;
        font-family: monospace;
      }

      .container {
        max-width: 800px;
        margin: 40px auto;
        padding: 40px;
        background-color: #f4f4f4;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .container p {
        font-family: monospace;
        font-size: 16px;
        text-align: center;
      }

      h1 {
        text-align: center;
        margin-bottom: 20px;
      }

      .input-container {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .input-container > div {
        flex: 1;
        margin-bottom: 10px;
        padding-right: 10px;
      }

      .input-container label {
        margin-right: 5px;
        font-size: 16px;
        white-space: nowrap;
      }

      .input-container input[type="text"],
      .input-container input[type="date"],
      .input-container select {
        width: 100%;
        height: 40px;
        padding: 8px;
        box-sizing: border-box;
        font-size: 16px;
        border: 1px solid #000;
        margin-bottom: 5px;
      }

      .add-task-btn {
        width: 100%;
        padding: 12px;
        background-color: black;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        font-family: monospace;
        margin-top: 10px;
      }

      .add-task-btn:hover {
        background-color: #333;
      }

      .todo-item {
        border: 2px solid #000;
        border-radius: 4px;
        padding: 12px;
        margin-bottom: 12px;
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        background-color: #f4f4f4;
      }

      .todo-item input[type="checkbox"] {
        margin-bottom: 5px;
      }

      .task-label {
        font-size: 16px;
        font-weight: bold;
      }

      .task-info {
        display: flex;
        flex-direction: column;
        flex: 1;
        margin-right: 12px;
      }

      .task-name {
        font-size: 18px;
        font-weight: bold;
        text-decoration: none;
        margin-bottom: 5px;
        display: inline-block;
      }

      .task-name.done {
        text-decoration: line-through;
      }

      .task-description {
        font-size: 14px;
        margin-bottom: 5px;
        display: inline-block;
      }

      .task-dates {
        font-size: 14px;
        color: #888;
        margin-top: 5px;
      }

      .task-priority {
        font-size: 14px;
        margin-bottom: 5px;
        font-weight: bold;
        color: var(--priority-color-high); /* Red color for high priority */
      }

      .task-priority.medium {
        color: var(
          --priority-color-medium
        ); /* Orange color for medium priority */
      }

      .task-priority.low {
        color: var(--priority-color-low); /* Green color for low priority */
      }

      .task-actions {
        display: flex;
        align-items: center;
      }

      .delete-btn,
      .edit-btn {
        color: white;
        background-color: red;
        border: none;
        border-radius: 4px;
        padding: 8px 12px;
        cursor: pointer;
        margin-left: 5px;
        font-size: 14px;
      }

      .delete-btn:hover {
        background-color: #c9302c;
      }

      .remove-all-btn {
        width: 100%;
        padding: 12px;
        background-color: #d9534f;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 20px;
        font-family: monospace;
      }

      .remove-all-btn:hover {
        background-color: #c9302c;
      }

      .sort-container {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
      }

      .sort-label {
        margin-right: 10px;
        font-size: 16px;
      }

      .sort-select {
        padding: 10px;
        font-size: 16px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>ToDo App</h1>
      <p><b>[This is a ToDo application that manages your tasks]</b></p>
      <br />
      <div class="input-container">
        <div>
          <label for="taskInput">Task name:</label>
          <input
            type="text"
            id="taskInput"
            placeholder="Enter a task"
            class="task-name-input"
          />
        </div>
        <div>
          <label for="descriptionInput">Description:</label>
          <input
            type="text"
            id="descriptionInput"
            placeholder="Enter a description"
            class="task-description-input"
          />
        </div>
        <div>
          <label for="startDateInput">Start Date:</label>
          <input type="date" id="startDateInput" />
        </div>
        <div>
          <label for="endDateInput">End Date:</label>
          <input type="date" id="endDateInput" />
        </div>
        <div>
          <label for="priorityInput">Priority:</label>
          <select id="priorityInput">
            <option value="high">High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
        </div>
      </div>
      <button class="add-task-btn" onclick="addTask()">Add Task</button>
      <br />
      <br />
      <div class="sort-container">
        <label class="sort-label" for="sortSelect">Sort By:</label>
        <select class="sort-select" id="sortSelect" onchange="sortTasks()">
          <option value="">None</option>
          <option value="name">Name</option>
          <option value="startDate">Start Date</option>
          <option value="endDate">End Date</option>
          <option value="priority">Priority</option>
        </select>
      </div>
      <div id="taskList"></div>
      <button class="remove-all-btn" onclick="removeAllTasks()">
        Remove All
      </button>
    </div>

    <script>
      let tasks = [];

      // Load tasks from localStorage on page load
      document.addEventListener("DOMContentLoaded", () => {
        const storedTasks = localStorage.getItem("tasks");
        if (storedTasks) {
          tasks = JSON.parse(storedTasks);
          renderTasks();
        }
      });

      // Function to add a task
      // Function to add a task
      function addTask() {
        const taskInput = document.getElementById("taskInput");
        const descriptionInput = document.getElementById("descriptionInput");
        const startDateInput = document.getElementById("startDateInput");
        const endDateInput = document.getElementById("endDateInput");
        const priorityInput = document.getElementById("priorityInput");

        const startDate = new Date(startDateInput.value);
        const endDate = new Date(endDateInput.value);

        if (endDate < startDate) {
          window.alert(
            "End date should be greater than or equal to the start date."
          );
          return;
        }

        const taskName = taskInput.value.trim();
        if (taskName === "") {
          window.alert("Task name cannot be empty.");
          return;
        }

        const task = {
          name: taskName,
          description: descriptionInput.value.trim(),
          startDate: startDateInput.value,
          endDate: endDateInput.value,
          priority: priorityInput.value,
          done: false,
        };

        tasks.push(task);
        taskInput.value = "";
        descriptionInput.value = "";
        startDateInput.value = "";
        endDateInput.value = "";
        renderTasks();

        // Store tasks in localStorage
        localStorage.setItem("tasks", JSON.stringify(tasks));
      }
      document
        .getElementById("taskInput")
        .addEventListener("keyup", function (event) {
          if (event.keyCode === 13) {
            // Check if Enter key is pressed
            event.preventDefault();
            addTask();
          }
        });
      // Function to render tasks
      // Function to render tasks
      // Function to render tasks
function renderTasks() {
  const taskList = document.getElementById("taskList");
  taskList.innerHTML = '';

  if (tasks.length === 0) {
    const noTasksMessage = document.createElement("p");
    noTasksMessage.innerText = "No tasks have been added.";
    noTasksMessage.style.textAlign = "center";
    noTasksMessage.style.fontWeight = "bold";
    noTasksMessage.style.marginTop = "20px";
    taskList.appendChild(noTasksMessage);
    return;
  }

  tasks.forEach((task, index) => {
    const taskItem = document.createElement("div");
    taskItem.className = "todo-item";
    taskItem.style.border = task.done ? "3px solid green" : "2px solid #000"; // Update border style
    taskItem.style.backgroundColor =  "#f4f4f4"  ; // Update background color

    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = task.done;
    checkbox.addEventListener("change", () => {
      toggleTaskStatus(index);
    });

    const taskInfo = document.createElement("div");
    taskInfo.className = "task-info";

    const taskName = document.createElement("a");
    taskName.className = "task-name";
    taskName.innerText = task.name;
    if (task.done) {
      taskName.classList.add("done");
    }

    const taskDescription = document.createElement("div");
    taskDescription.className = "task-description";
    taskDescription.innerText = task.description;

    const taskDates = document.createElement("div");
    taskDates.className = "task-dates";
    taskDates.innerHTML = `<b>Start Date:</b> ${task.startDate}<br><b>End Date:</b> ${task.endDate}`;

    const taskPriority = document.createElement("div");
    taskPriority.className = `task-priority ${task.priority}`;
    taskPriority.innerText = `Priority: ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}`;

    taskInfo.appendChild(taskName);
    taskInfo.appendChild(taskDescription);
    taskInfo.appendChild(taskDates);
    taskInfo.appendChild(taskPriority);

    const taskActions = document.createElement("div");
    taskActions.className = "task-actions";

    const deleteButton = document.createElement("button");
    deleteButton.innerText = "Delete";
    deleteButton.className = "delete-btn";
    deleteButton.addEventListener("click", () => {
      deleteTask(index);
    });

    const editButton = document.createElement("button");
    editButton.innerText = "Edit";
    editButton.className = "edit-btn";
    editButton.style.backgroundColor = "green";
    editButton.addEventListener("click", () => {
      editTask(index);
    });

    taskActions.appendChild(deleteButton);
    taskActions.appendChild(editButton);

    taskItem.appendChild(checkbox);
    taskItem.appendChild(taskInfo);
    taskItem.appendChild(taskActions);

    taskList.appendChild(taskItem);
  });
}

      // Function to toggle task status
      function toggleTaskStatus(index) {
        tasks[index].done = !tasks[index].done;
        renderTasks();
        localStorage.setItem("tasks", JSON.stringify(tasks));
      }

      // Function to edit a task name
      function editTask(index) {
        const task = tasks[index];
        let updatedTaskName = prompt("Enter the updated task name:", task.name);
        updatedTaskName = updatedTaskName.trim();

        // Check if the updated task name is not empty
        if (updatedTaskName !== "") {
          tasks[index].name = updatedTaskName;
          renderTasks();
          localStorage.setItem("tasks", JSON.stringify(tasks));
        }
      }

      // Function to delete a task
      function deleteTask(index) {
        tasks.splice(index, 1);
        renderTasks();
        localStorage.setItem("tasks", JSON.stringify(tasks));
      }

      // Function to remove all tasks
      function removeAllTasks() {
        tasks = [];
        renderTasks();
        localStorage.setItem("tasks", JSON.stringify(tasks));
      }

      // Function to sort tasks based on the selected option
      function sortTasks() {
        const sortSelect = document.getElementById("sortSelect");
        const selectedOption = sortSelect.value;

        switch (selectedOption) {
          case "name":
            tasks.sort((a, b) => a.name.localeCompare(b.name));
            break;
          case "startDate":
            tasks.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
            break;
          case "endDate":
            tasks.sort((a, b) => new Date(a.endDate) - new Date(b.endDate));
            break;
          case "priority":
            tasks.sort((a, b) => {
              const priorityOrder = { high: 3, medium: 2, low: 1 };
              return priorityOrder[b.priority] - priorityOrder[a.priority];
            });
            break;
          default:
            // No sorting needed, do nothing
            break;
        }

        renderTasks();
      }
    </script>
  </body>
</html>
